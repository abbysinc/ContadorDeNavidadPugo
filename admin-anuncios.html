<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üéÖ Panel Global de Anuncios üéÑ</title>
<link href="https://fonts.googleapis.com/css2?family=Mountains+of+Christmas:wght@700&display=swap" rel="stylesheet">
<style>
  *{margin:0;padding:0;box-sizing:border-box;}
  body {
    background:url('https://cdn.discordapp.com/attachments/1428211239804207155/1435316223217893406/39b94e67b72156a364c7271805b25098.gif') no-repeat center/cover fixed;
    font-family:'Mountains of Christmas',cursive;
    color:white;
    text-align:center;
    min-height:100vh;
  }
  h1{
    font-size:3em;
    margin-top:50px;
    text-shadow:0 0 25px gold,0 0 40px red;
    animation:brillo 2s infinite alternate;
  }
  @keyframes brillo{
    from{text-shadow:0 0 20px red;}
    to{text-shadow:0 0 40px gold;}
  }
  form{
    background:rgba(255,255,255,0.15);
    border:3px solid gold;
    border-radius:20px;
    box-shadow:0 0 30px gold;
    width:90%;
    max-width:500px;
    margin:30px auto;
    padding:25px;
    backdrop-filter:blur(8px);
  }
  input,textarea,select{
    width:90%;
    margin:10px 0;
    padding:10px;
    border-radius:10px;
    border:2px solid gold;
    background:rgba(255,255,255,0.1);
    color:white;
    font-size:1em;
    outline:none;
  }
  button{
    background:linear-gradient(45deg,#ff0000,#00ff00);
    color:white;
    border:2px solid gold;
    border-radius:10px;
    padding:10px 25px;
    font-weight:bold;
    cursor:pointer;
    transition:.3s;
  }
  button:hover{transform:scale(1.1);box-shadow:0 0 20px gold;}
  .anuncio{
    background:rgba(255,255,255,0.1);
    border:3px solid gold;
    border-radius:15px;
    box-shadow:0 0 20px gold;
    margin:20px auto;
    max-width:500px;
    padding:15px;
    position:relative;
  }
  .anuncio h3{color:gold;margin-bottom:5px;}
  .anuncio p{color:white;}
  .eliminar{
    position:absolute;
    top:10px;right:10px;
    background:red;
    color:white;
    border:none;
    border-radius:8px;
    padding:4px 10px;
    cursor:pointer;
  }
  .snowflake{
    position:fixed;top:-10px;color:white;font-size:1.5em;opacity:.9;
    animation:caer linear infinite;pointer-events:none;z-index:999;
  }
  @keyframes caer{
    0%{transform:translateY(0) rotate(0);}
    100%{transform:translateY(100vh) rotate(360deg);}
  }
</style>
</head>
<body>

<h1>üéÑ Panel Global de Anuncios üéÖ</h1>

<form id="form-anuncio">
  <input type="text" id="titulo" placeholder="üéÅ T√≠tulo del anuncio" required>
  <textarea id="descripcion" placeholder="üìù Escribe aqu√≠ la descripci√≥n" required></textarea>
  <select id="tipo">
    <option value="temporal">‚è≥ Temporal</option>
    <option value="permanente">üìå Permanente</option>
  </select>
  <button type="submit">üéÖ Publicar Anuncio üéÅ</button>
</form>

<h2 style="text-shadow:0 0 15px gold;">üìú Anuncios Actuales</h2>
<div id="lista-anuncios"></div>

<script>
const form = document.getElementById("form-anuncio");
const lista = document.getElementById("lista-anuncios");
const archivo = "anuncios.json";

// ‚ùÑÔ∏è Animaci√≥n nieve
setInterval(() => {
  const copos=["‚ùÑ","‚ùÖ","‚ùÜ"];
  const n=document.createElement("div");
  n.classList.add("snowflake");
  n.textContent=copos[Math.floor(Math.random()*copos.length)];
  n.style.left=Math.random()*100+"vw";
  n.style.animationDuration=Math.random()*3+2+"s";
  document.body.appendChild(n);
  setTimeout(()=>n.remove(),6000);
},120);

// üîÑ Cargar anuncios desde archivo JSON
async function cargarAnuncios(){
  try{
    const res=await fetch(archivo+"?t="+Date.now());
    const data=await res.json();
    lista.innerHTML="";
    data.forEach((a,i)=>{
      const div=document.createElement("div");
      div.className="anuncio";
      div.innerHTML=`
        <h3>${a.titulo}</h3>
        <p>${a.descripcion}</p>
        <small>Tipo: ${a.tipo}</small>
        <button class="eliminar" onclick="eliminarAnuncio(${i})">‚úñ</button>`;
      lista.appendChild(div);
    });
  }catch(err){
    lista.innerHTML="<p>No se pudo cargar el archivo anuncios.json</p>";
  }
}

// üóëÔ∏è Eliminar anuncio
async function eliminarAnuncio(i){
  const res=await fetch(archivo);
  const anuncios=await res.json();
  anuncios.splice(i,1);
  await guardarArchivo(anuncios);
  cargarAnuncios();
}

// üíæ Guardar en archivo JSON (usa un backend PHP simple)
async function guardarArchivo(anuncios){
  await fetch("guardar.php",{
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify(anuncios)
  });
}

// üì§ Enviar nuevo anuncio
form.addEventListener("submit",async e=>{
  e.preventDefault();
  const titulo=document.getElementById("titulo").value.trim();
  const descripcion=document.getElementById("descripcion").value.trim();
  const tipo=document.getElementById("tipo").value;
  const res=await fetch(archivo);
  const anuncios=await res.json();
  anuncios.push({titulo,descripcion,tipo,fecha:new Date().toISOString()});
  await guardarArchivo(anuncios);
  form.reset();
  cargarAnuncios();
  alert("üéÅ Anuncio publicado globalmente");
});

cargarAnuncios();
</script>
</body>
</html>
